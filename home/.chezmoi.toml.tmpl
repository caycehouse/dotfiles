{{- $isWorkComputer := promptBoolOnce . "isWorkComputer" "Is this your work computer" -}}
{{- $osid := .chezmoi.os -}}
{{- if (hasKey .chezmoi.osRelease "id") -}}
{{-   $osid = printf "%s-%s" .chezmoi.os .chezmoi.osRelease.id -}}
{{- end -}}

{{- $hasNvidia := false -}}

{{- if (ne .chezmoi.os "windows") -}}
{{-   if (ne .chezmoi.os "darwin") -}}
{{-     $hasNvidia = promptBoolOnce . "hasNvidia" "Does this machine have a NVIDIA GPU" false -}}
{{-   end -}}
{{- end -}}

[data]
  isWorkComputer = {{ $isWorkComputer }}
  hasNvidia = {{ $hasNvidia }}
  osid = {{ $osid | quote }}

{{ if (eq .chezmoi.os "linux") -}}
{{   if (.chezmoi.kernel.osrelease | lower | contains "microsoft") -}}
[onepassword]
  command = "op.exe"
{{   end -}}
{{ end -}}
